<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Umesh Joshi | Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
:root {
  --primary:#3498db;
  --bg:#0f172a;
  --text:#ffffff;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  margin:0;background:var(--bg);color:var(--text);
  height:100vh;overflow:hidden;
}
.screen{
  position:absolute;inset:0;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  opacity:0;pointer-events:none;
  transition:.8s;
}
.screen.active{opacity:1;pointer-events:auto}

button{
  padding:14px 40px;
  background:transparent;
  border:2px solid white;
  color:white;
  cursor:pointer;
  font-size:1.2rem;
}
button:hover{background:white;color:var(--primary)}

h1{font-size:3rem;margin-bottom:1rem}
h2{color:var(--primary)}
p{max-width:800px;text-align:center}

/* Map */
#map-wrapper{
  position:fixed;inset:0;
  z-index:999;
  display:none;
}
#map-wrapper.show{display:block}
#map{width:100%;height:100%}

.map-ui{
  position:absolute;bottom:20px;
  left:50%;transform:translateX(-50%);
  display:flex;gap:12px;
  background:rgba(0,0,0,.5);
  padding:10px;border-radius:12px;
}
.map-item{
  padding:10px 14px;
  cursor:pointer;
  border-left:3px solid transparent;
  white-space:nowrap;
}
.map-item.active{
  border-left-color:var(--primary);
  background:rgba(255,255,255,.1);
}
.map-detail{
  position:absolute;top:20px;right:20px;
  max-width:420px;
  background:rgba(0,0,0,.6);
  padding:16px;border-radius:12px;
}
.map-close{
  position:absolute;top:20px;left:20px;
  padding:10px;
}
</style>
</head>

<body>

<!-- INTRO -->
<div id="screen-1" class="screen active">
  <h1>Hello</h1>
  <p>Welcome to my Battery Engineering Portfolio</p>
  <button onclick="goToExperience()">Start →</button>
</div>

<!-- EXPERIENCE SLIDE -->
<div id="screen-2" class="screen">
  <h1>PROFESSIONAL EXPERIENCE</h1>
  <p>Explore my journey geographically</p>
  <button onclick="openMap()">View Experience on Map</button>
</div>

<!-- MAP -->
<div id="map-wrapper">
  <button class="map-close" onclick="closeMap()">Close ✕</button>
  <div id="map"></div>
  <div id="timeline" class="map-ui"></div>
  <div id="detail" class="map-detail"></div>
</div>

<script>
/* ---------- DATA ---------- */
const experiences = [
  {
    title:"ElringKlinger AG – Internship",
    date:"05.2023 – 11.2023",
    location:[48.624,9.366], // Neuffen
    tasks:"Battery system testing, ECU validation, impedance measurements, documentation."
  },
  {
    title:"ElringKlinger AG – Working Student",
    date:"11.2023 – 01.2024",
    location:[48.624,9.366], // Same place
    tasks:"Test automation, data evaluation, hardware development support."
  },
  {
    title:"Mercedes-Benz AG – Working Student",
    date:"02.2024 – Ongoing",
    location:[48.7758,9.1829], // Stuttgart
    tasks:"Battery modeling, MATLAB automation, HV system simulations."
  }
];

/* ---------- STATE ---------- */
let map, markers=[], current=0;

/* ---------- NAV ---------- */
function goToExperience(){
  document.getElementById("screen-1").classList.remove("active");
  document.getElementById("screen-2").classList.add("active");
}

/* ---------- MAP ---------- */
function openMap(){
  document.getElementById("map-wrapper").classList.add("show");

  if(!map){
    map=L.map("map").setView([51,10],5);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
      {attribution:"© OpenStreetMap"}).addTo(map);
  }

  markers.forEach(m=>map.removeLayer(m));
  markers=[];

  const timeline=document.getElementById("timeline");
  timeline.innerHTML="";

  experiences.forEach((e,i)=>{
    const m=L.circleMarker(e.location,{radius:8}).addTo(map);
    m.on("click",()=>focusExp(i));
    markers.push(m);

    const item=document.createElement("div");
    item.className="map-item";
    item.innerHTML=`<b>${e.title}</b><br>${e.date}`;
    item.onclick=()=>focusExp(i);
    item.dataset.i=i;
    timeline.appendChild(item);
  });

  focusExp(0,true);
}

function focusExp(i,instant=false){
  current=i;
  const e=experiences[i];
  if(instant) map.setView(e.location,12);
  else map.flyTo(e.location,12,{duration:1.5});

  document.querySelectorAll(".map-item").forEach(el=>{
    el.classList.toggle("active",el.dataset.i==i);
  });

  document.getElementById("detail").innerHTML=
    `<h3>${e.title}</h3>
     <p><i>${e.date}</i></p>
     <p>${e.tasks}</p>`;
}

function closeMap(){
  document.getElementById("map-wrapper").classList.remove("show");
}
</script>

</body>
</html>
