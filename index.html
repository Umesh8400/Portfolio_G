<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Umesh Joshi | Battery Engineer Portfolio</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary: #3498db;
            --secondary: #2ecc71; /* Green */
            --merc-silver: #e0e0e0;
            --bg-dark: #0f172a;
            --glass: rgba(15, 23, 42, 0.85);
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font-main); }

        body {
            background-color: var(--bg-dark);
            color: white;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            user-select: none;
        }

        /* --- BACKGROUNDS --- */
        #bg-image {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: -3; opacity: 0.4;
        }
        
        .stars {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px);
            background-size: 550px 550px; z-index: -2; opacity: 0.5; animation: twinkle 5s infinite;
        }
        @keyframes twinkle { 0%, 100% { opacity: 0.5; } 50% { opacity: 0.8; } }

        /* --- SCREENS --- */
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 0.8s ease, transform 0.8s ease;
            transform: translateY(20px);
        }
        .screen.active { opacity: 1; pointer-events: all; transform: translateY(0); }

        /* --- SCREEN 1: HELLO --- */
        .hello-cloud { position: relative; width: 90vw; height: 60vh; }
        .cloud-word { position: absolute; color: rgba(255,255,255,0.8); font-weight: bold; animation: float 5s infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .w-main { font-size: 5rem; top: 50%; left: 50%; transform: translate(-50%, -50%); text-shadow: 0 0 20px rgba(255,255,255,0.4); }
        /* Scattered words */
        .w-1 { top: 20%; left: 20%; font-size: 1.5rem; } .w-2 { top: 15%; right: 25%; font-size: 2rem; }
        .w-3 { bottom: 25%; left: 15%; font-size: 2.5rem; } .w-4 { bottom: 20%; right: 20%; font-size: 1.8rem; }
        
        .welcome-line { margin-top: 2rem; font-size: 1.5rem; border-top: 1px solid white; padding-top: 1rem; }
        .start-btn { margin-top: 30px; padding: 10px 30px; background: rgba(255,255,255,0.1); border: 1px solid white; color: white; cursor: pointer; z-index: 20; }

        /* --- SCREEN 2: LANGUAGES --- */
        .lang-btn { padding: 15px 50px; font-size: 1.5rem; margin: 20px; background: transparent; border: 2px solid white; color: white; cursor: pointer; transition: 0.3s; }
        .lang-btn:hover { background: white; color: var(--primary); transform: scale(1.05); }

        /* --- STANDARD CONTENT SLIDES --- */
        .content-container { display: flex; align-items: center; justify-content: center; max-width: 1200px; padding: 20px; }
        .side-image { width: 300px; height: auto; margin-right: 40px; border-radius: 10px; }
        .text-content { max-width: 600px; }
        .profile-photo { width: 150px; height: 150px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; margin-bottom: 20px; }
        h1 { font-size: 2.5rem; margin-bottom: 1rem; } h2 { font-size: 1.8rem; color: var(--primary); margin-bottom: 0.5rem; }
        p { font-size: 1.1rem; line-height: 1.5; margin-bottom: 10px; }
        .skills-tag { display: inline-block; padding: 5px 15px; margin: 3px; background: rgba(255,255,255,0.1); border-left: 3px solid var(--primary); }
        .testimonial { background: rgba(255,255,255,0.1); padding: 15px; margin: 10px 0; border-radius: 10px; }

        /* --- MAP & EXPERIENCE ANIMATION (Advanced) --- */
        #map-viewport {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #0b1120;
        }

        /* The Map Image Layer */
        #geo-map {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* Abstract Tech Map Background */
            background-image: radial-gradient(circle at 60% 40%, #1e293b 0%, #0f172a 60%),
                              linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent),
                              linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent);
            background-size: 100% 100%, 50px 50px, 50px 50px;
            transform-origin: 60% 40%; /* Zoom into "Germany" area */
            transform: scale(1);
            transition: transform 2.5s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: 1;
        }

        /* Locations Markers */
        .city-marker {
            position: absolute; z-index: 10;
            display: flex; flex-direction: column; align-items: center;
            opacity: 0; transition: opacity 1s;
        }
        .pin {
            width: 20px; height: 20px; border-radius: 50%;
            border: 3px solid white; box-shadow: 0 0 15px white;
            position: relative;
        }
        .pin::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 60px; height: 60px; border-radius: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid white; animation: ripple 2s infinite;
        }
        @keyframes ripple { 0% { width:0; height:0; opacity:1; } 100% { width:80px; height:80px; opacity:0; } }
        
        .city-label {
            margin-top: 10px; background: rgba(0,0,0,0.7);
            padding: 5px 10px; border-radius: 5px; font-size: 0.9rem; font-weight: bold;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* Specific Positions (Relative to screen center after zoom) */
        /* Neuffen is South-East of Stuttgart, UntertÃ¼rkheim is Central/East */
        #marker-neuffen { top: 75%; left: 60%; } /* Neuffen */
        #marker-neuffen .pin { background: var(--secondary); border-color: var(--secondary); box-shadow: 0 0 15px var(--secondary); }
        
        #marker-merc { top: 35%; left: 50%; } /* UntertÃ¼rkheim */
        #marker-merc .pin { background: var(--primary); border-color: var(--primary); box-shadow: 0 0 15px var(--primary); }

        /* The Road (SVG) */
        #road-svg-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; pointer-events: none;
            opacity: 0; transition: opacity 1s;
        }
        .road-path {
            fill: none; stroke: rgba(255,255,255,0.3); stroke-width: 4; stroke-dasharray: 10, 5;
        }
        
        /* The Car */
        #moving-car {
            position: absolute; font-size: 2rem; z-index: 20;
            top: 73%; left: 58%; /* Start at Neuffen */
            transition: top 2.5s linear, left 2.5s linear, transform 0.5s;
            opacity: 0;
            filter: drop-shadow(0 0 10px white);
        }

        /* Experience Containers */
        .exp-container {
            position: absolute;
            z-index: 30;
            display: flex; flex-direction: column; gap: 10px;
            opacity: 0; transition: opacity 0.5s;
        }
        
        /* Connector Lines */
        .exp-container::before {
            content: ''; position: absolute;
            background: white; z-index: -1;
        }

        /* Position Experiences */
        /* Neuffen Experience (Left of marker) */
        #exp-group-neuffen { bottom: 20%; right: 45%; align-items: flex-end; }
        #exp-group-neuffen::before {
            top: 80%; right: -50px; width: 60px; height: 2px;
            transform: rotate(30deg); background: var(--secondary);
        }

        /* Mercedes Experience (Right of marker) */
        #exp-group-merc { top: 15%; left: 60%; align-items: flex-start; }
        #exp-group-merc::before {
            top: 50%; left: -60px; width: 70px; height: 2px;
            transform: rotate(-20deg); background: var(--primary);
        }

        /* Job Cards (Accordion Style) */
        .job-card {
            background: var(--glass);
            border: 1px solid rgba(255,255,255,0.2);
            border-left: 4px solid #888;
            padding: 10px 15px;
            border-radius: 5px;
            width: 320px;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            height: 50px; /* Collapsed height */
            position: relative;
        }
        
        .job-card:hover { transform: translateX(5px); background: rgba(30, 41, 59, 0.95); }

        .job-card.active {
            height: auto; /* Expand */
            border-color: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .job-card h3 { font-size: 1rem; margin: 0; color: #fff; pointer-events: none; }
        .job-card h4 { font-size: 0.8rem; color: #cbd5e1; margin-top: 5px; pointer-events: none; }
        .job-card .desc {
            margin-top: 15px; font-size: 0.85rem; line-height: 1.4; color: #ddd;
            display: none; pointer-events: none; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;
        }
        .job-card.active .desc { display: block; animation: fadeIn 0.5s; }
        
        /* Specific Colors */
        .elring-card { border-left-color: var(--secondary); }
        .merc-card { border-left-color: var(--primary); }

        /* --- NAVIGATION UI --- */
        .nav-ui { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: space-between; padding: 0 40px; z-index: 100; display: none; }
        .nav-btn { font-size: 1.2rem; font-weight: bold; cursor: pointer; color: white; opacity: 0.7; transition: 0.3s; text-transform: uppercase; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.5); padding: 10px 20px; border-radius: 20px; }
        .nav-btn:hover { opacity: 1; color: var(--primary); transform: scale(1.05); }
        
        /* Click Zones */
        .click-zone { position: absolute; top:0; height: 100%; z-index: 50; }
        .zone-right { right: 0; width: 20%; cursor: e-resize; }
        .zone-left { left: 0; width: 10%; cursor: w-resize; }

    </style>
</head>
<body onload="initSystem()">

    <div id="stars-layer" class="stars"></div>
    <div id="bg-image"></div>
    
    <div class="click-zone zone-left" onclick="goBack()"></div>
    <div class="click-zone zone-right" onclick="goNext()"></div>

    <div id="screen-hello" class="screen active">
        <div class="hello-cloud">
            <span class="cloud-word w-main">Hello</span>
            <span class="cloud-word w-1">Namaskar</span>
            <span class="cloud-word w-2">Bonjour</span>
            <span class="cloud-word w-3">Hallo</span>
        </div>
        <div class="welcome-line">My Battery Engineering Portfolio</div>
        <button class="start-btn" onclick="goToLanguages()">Start &#8594;</button>
    </div>

    <div id="screen-lang" class="screen">
        <h2>Select Language / Sprache WÃ¤hlen</h2>
        <div>
            <button class="lang-btn" onclick="selectLang('en')">English</button>
            <button class="lang-btn" onclick="selectLang('de')">Deutsch</button>
        </div>
    </div>

    <div id="screen-content" class="screen">
        </div>

    <div id="screen-map" class="screen">
        <div id="map-viewport">
            <div id="geo-map"></div>

            <svg id="road-svg-container" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path class="road-path" d="M 60 75 Q 50 60 50 35" />
            </svg>

            <div id="moving-car">ðŸš—</div>

            <div id="marker-neuffen" class="city-marker">
                <div class="pin"></div>
                <div class="city-label">Neuffen<br><span style="font-size:0.7rem; color:var(--secondary)">ElringKlinger</span></div>
            </div>

            <div id="marker-merc" class="city-marker">
                <div class="pin"></div>
                <div class="city-label">UntertÃ¼rkheim<br><span style="font-size:0.7rem; color:var(--primary)">Mercedes-Benz</span></div>
            </div>

            <div id="exp-group-neuffen" class="exp-container">
                <div class="job-card elring-card" onclick="toggleCard(this)">
                    <h3 id="txt-ek-1-t">Internship</h3>
                    <h4 id="txt-ek-1-d">05.2023 â€“ 11.2023</h4>
                    <div class="desc" id="txt-ek-1-desc">Content...</div>
                </div>
                <div class="job-card elring-card" onclick="toggleCard(this)">
                    <h3 id="txt-ek-2-t">Working Student</h3>
                    <h4 id="txt-ek-2-d">11.2023 â€“ 01.2024</h4>
                    <div class="desc" id="txt-ek-2-desc">Content...</div>
                </div>
            </div>

            <div id="exp-group-merc" class="exp-container">
                <div class="job-card merc-card" onclick="toggleCard(this)">
                    <h3 id="txt-mb-1-t">Working Student</h3>
                    <h4 id="txt-mb-1-d">02.2024 â€“ 11.2024</h4>
                    <div class="desc" id="txt-mb-1-desc">Content...</div>
                </div>
                <div class="job-card merc-card" onclick="toggleCard(this)">
                    <h3 id="txt-mb-2-t">Master Thesis</h3>
                    <h4 id="txt-mb-2-d">12.2024 â€“ 07.2025</h4>
                    <div class="desc" id="txt-mb-2-desc">Content...</div>
                </div>
                <div class="job-card merc-card" onclick="toggleCard(this)">
                    <h3 id="txt-mb-3-t">Working Student (Current)</h3>
                    <h4 id="txt-mb-3-d">08.2025 â€“ Ongoing</h4>
                    <div class="desc" id="txt-mb-3-desc">Content...</div>
                </div>
            </div>

        </div>
    </div>

    <div id="global-nav" class="nav-ui">
        <div class="nav-btn" onclick="goBack()">&#8592; <span id="txt-back">Back</span></div>
        <div class="nav-btn" onclick="goNext()"><span id="txt-next">Next</span> &#8594;</div>
    </div>

    <script>
        // --- DATA ---
        const data = {
            en: [
                {
                    type: "intro",
                    bg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    sideImg: "avatar.jpg", // REPLACE
                    title: "Hello, I am Umesh Yadneshwar Joshi",
                    subtitle: "M.Eng. in Renewable Energies & E-Mobility",
                    text: "An innovative Electrical Engineer specializing in Battery Development, Algorithms, Applications, and System Validation. Passionate about advancing EV technology at Mercedes-Benz AG."
                },
                { type: "title", title: "PROFESSIONAL EXPERIENCE", bg: "https://cdn.prod.website-files.com/5ec85520c4dfff034b036be2/67d9aa0c3f74b6e38ebe75f4_mercedes-solid-state-battery.webp" },
                
                // MAP SLIDE
                { type: "map-experience" },

                { type: "title", title: "EDUCATION", bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro" },
                {
                    type: "content",
                    bg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    sideImg: "https://i.ytimg.com/vi/lCXWlFLVpK8/maxresdefault.jpg",
                    title: "Hochschule Stralsund, Germany",
                    role: "Master in Renewable Energies and E-Mobility (03.2022 â€“ 08.2025)",
                    details: "Focus areas: Vehicle Management Systems, Vehicle Simulation and Test Drives, System Theory, Hydrogen Technology, Control of Electric Drives."
                },
                {
                    type: "content",
                    bg: "https://cdn.prod.website-files.com/5ec85520c4dfff034b036be2/67d9aa0c3f74b6e38ebe75f4_mercedes-solid-state-battery.webp",
                    sideImg: "https://autovista24.autovistagroup.com/wp-content/uploads/sites/5/2021/06/EV20Battery_2-1024x633.jpg",
                    title: "University of Mumbai, India",
                    role: "Bachelor of Engineering - Electrical Engineering (08.2018 â€“ 06.2021)",
                    details: "Focus areas: Power Supply Systems, Electrical Networks, Electrical Machines, Power Electronics, Drives and Control, Environmental Management."
                },
                { type: "title", title: "SKILLS", bg: "https://diotec.com/files/diotec/files/Post_Electricity%26Photovoltaic_SICW40C120.png" },
                {
                    type: "content",
                    bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro",
                    sideImg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    title: "Technical Skills",
                    role: "Software & Tools",
                    isSkills: true,
                    skills: ["MATLAB/Simulink", "Python (Pandas, NumPy)", "VS-Code", "GitHub", "Confluence", "Machine Learning (AI/ML)", "PREEvision", "CAN/CANoe", "C/C++", "LT Spice", "AUTOSAR", "Impedance Analysis"]
                },
                {
                    type: "end",
                    bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro",
                    title: "Thank You",
                    subtitle: "Let's Connect",
                    links: true
                }
            ],
            de: [
                 {
                    type: "intro",
                    bg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    sideImg: "avatar.jpg",
                    title: "Hallo, ich bin Umesh Yadneshwar Joshi",
                    subtitle: "M.Eng. Erneuerbare Energien & E-MobilitÃ¤t",
                    text: "Ein innovativer Elektroingenieur, spezialisiert auf Batterieentwicklung, Algorithmen, Anwendungen und Systemvalidierung. Leidenschaftlich bei der Weiterentwicklung der EV-Technologie bei Mercedes-Benz AG."
                },
                { type: "title", title: "BERUFSERFAHRUNG", bg: "https://cdn.prod.website-files.com/5ec85520c4dfff034b036be2/67d9aa0c3f74b6e38ebe75f4_mercedes-solid-state-battery.webp" },
                { type: "map-experience" },
                { type: "title", title: "AUSBILDUNG", bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro" },
                {
                    type: "content",
                    bg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    sideImg: "https://i.ytimg.com/vi/lCXWlFLVpK8/maxresdefault.jpg",
                    title: "Hochschule Stralsund, Deutschland",
                    role: "Master in Erneuerbare Energien und E-MobilitÃ¤t (03.2022 â€“ 08.2025)",
                    details: "SchwerpunktfÃ¤cher: Fahrzeugmanagementsysteme, Fahrzeugsimulation und Testfahrt, Systemtheorie, Wasserstofftechnologie, Steuerung elektrischer Antriebe."
                },
                {
                    type: "content",
                    bg: "https://cdn.prod.website-files.com/5ec85520c4dfff034b036be2/67d9aa0c3f74b6e38ebe75f4_mercedes-solid-state-battery.webp",
                    sideImg: "https://autovista24.autovistagroup.com/wp-content/uploads/sites/5/2021/06/EV20Battery_2-1024x633.jpg",
                    title: "University of Mumbai, Indien",
                    role: "Bachelor of Engineering - Electrotechnik (08.2018 â€“ 06.2021)",
                    details: "SchwerpunktfÃ¤cher: Energieversorgungssysteme, Elektrische Netzwerke, Elektrische Maschinen, Leistungselektronik, Antriebe und Steuerung, Umweltmanagement."
                },
                { type: "title", title: "KENNTNISSE", bg: "https://diotec.com/files/diotec/files/Post_Electricity%26Photovoltaic_SICW40C120.png" },
                {
                    type: "content",
                    bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro",
                    sideImg: "https://builtin.com/sites/www.builtin.com/files/2023-02/battery-hardware-new-battery-technologies.png",
                    title: "Softwarekenntnisse",
                    role: "",
                    isSkills: true,
                    skills: ["MATLAB/Simulink", "Python (Pandas, NumPy)", "VS-Code", "GitHub", "Confluence", "Machine Learning (AI/ML)", "PREEvision", "CAN/CANoe", "C/C++", "LT Spice", "AUTOSAR", "Impedanz- und Vectoranalyze"]
                },
                {
                    type: "end",
                    bg: "https://media.licdn.com/dms/image/v2/D4E12AQF9i6bHykCRMw/article-cover_image-shrink_600_2000/article-cover_image-shrink_600_2000/0/1727437705854?e=2147483647&v=beta&t=y0xbvu7k6WiDHSi9IEeWnadTx79j2gvamyg03Hcs-ro",
                    title: "Vielen Dank",
                    subtitle: "Kontaktieren Sie mich",
                    links: true
                }
            ]
        };

        // --- STATE & VARS ---
        let currentLang = 'en';
        let slideIndex = 0;
        let appState = 'hello';
        let mapSequence = 0; // 0=Zoom, 1=Elring, 2=Car, 3=Merc, 4=Finished
        
        // DOM ELEMENTS
        const screenHello = document.getElementById('screen-hello');
        const screenLang = document.getElementById('screen-lang');
        const screenContent = document.getElementById('screen-content');
        const screenMap = document.getElementById('screen-map');
        const globalNav = document.getElementById('global-nav');
        const bgDiv = document.getElementById('bg-image');

        function initSystem() {}

        function goToLanguages() {
            appState = 'lang';
            switchScreen(screenHello, screenLang);
        }

        function selectLang(lang) {
            currentLang = lang;
            document.getElementById('txt-next').innerText = lang === 'en' ? "Next" : "Weiter";
            document.getElementById('txt-back').innerText = lang === 'en' ? "Back" : "ZurÃ¼ck";
            
            // FILL MAP TEXT
            const txt = {
                en: {
                    ek1t: "Internship", ek1d: "05.2023 â€“ 11.2023", ek1desc: "â€¢ Battery System Tests & Validation<br>â€¢ Impedance measurements<br>â€¢ Test protocols",
                    ek2t: "Working Student", ek2d: "11.2023 â€“ 01.2024", ek2desc: "â€¢ Testing battery components<br>â€¢ Evaluating results (X-Frame)<br>â€¢ Hardware design",
                    mb1t: "Working Student", mb1d: "02.2024 â€“ 11.2024", mb1desc: "â€¢ MATLAB automation (95% saved)<br>â€¢ 3D Simulation (CST)<br>â€¢ Impedance measurements",
                    mb2t: "Master Thesis", mb2d: "12.2024 â€“ 07.2025", mb2desc: "â€¢ Voltage Relaxation Modeling (1.0)<br>â€¢ Python Optimization<br>â€¢ SOC estimation accuracy",
                    mb3t: "Working Student", mb3d: "08.2025 â€“ Ongoing", mb3desc: "â€¢ Machine Learning predictive analysis<br>â€¢ Anomaly datasets<br>â€¢ Fundamental research"
                },
                de: {
                    ek1t: "Praktikant", ek1d: "05.2023 â€“ 11.2023", ek1desc: "â€¢ Batterie-Systemtests & Validierung<br>â€¢ Impedanzmessungen<br>â€¢ Testprotokolle",
                    ek2t: "Werkstudent", ek2d: "11.2023 â€“ 01.2024", ek2desc: "â€¢ Testen von Batteriekomponenten<br>â€¢ Auswertung (X-Frame)<br>â€¢ Hardware-Design",
                    mb1t: "Werkstudent", mb1d: "02.2024 â€“ 11.2024", mb1desc: "â€¢ MATLAB-Automatisierung<br>â€¢ 3D-Simulation (CST)<br>â€¢ Impedanzmessungen",
                    mb2t: "Masterarbeit", mb2d: "12.2024 â€“ 07.2025", mb2desc: "â€¢ Spannungsrelaxationsmodellierung (1.0)<br>â€¢ Python-Optimierung<br>â€¢ SOC-SchÃ¤tzung",
                    mb3t: "Werkstudent", mb3d: "08.2025 â€“ Laufend", mb3desc: "â€¢ Machine Learning Analyse<br>â€¢ Anomalie-DatensÃ¤tze<br>â€¢ Grundlagenforschung"
                }
            };

            const t = txt[lang];
            document.getElementById('txt-ek-1-t').innerText = t.ek1t; document.getElementById('txt-ek-1-d').innerText = t.ek1d; document.getElementById('txt-ek-1-desc').innerHTML = t.ek1desc;
            document.getElementById('txt-ek-2-t').innerText = t.ek2t; document.getElementById('txt-ek-2-d').innerText = t.ek2d; document.getElementById('txt-ek-2-desc').innerHTML = t.ek2desc;
            document.getElementById('txt-mb-1-t').innerText = t.mb1t; document.getElementById('txt-mb-1-d').innerText = t.mb1d; document.getElementById('txt-mb-1-desc').innerHTML = t.mb1desc;
            document.getElementById('txt-mb-2-t').innerText = t.mb2t; document.getElementById('txt-mb-2-d').innerText = t.mb2d; document.getElementById('txt-mb-2-desc').innerHTML = t.mb2desc;
            document.getElementById('txt-mb-3-t').innerText = t.mb3t; document.getElementById('txt-mb-3-d').innerText = t.mb3d; document.getElementById('txt-mb-3-desc').innerHTML = t.mb3desc;

            appState = 'content';
            slideIndex = 0;
            renderSlide();
            switchScreen(screenLang, screenContent);
            setTimeout(() => { globalNav.style.display = 'flex'; }, 800);
        }

        // --- NAVIGATION ---
        function goNext() {
            if (appState === 'hello') goToLanguages();
            else if (appState === 'lang') return;
            else if (appState === 'content') {
                const currentSlide = data[currentLang][slideIndex];
                
                // MAP LOGIC
                if (currentSlide.type === 'map-experience') {
                    if (mapSequence < 4) {
                        advanceMapSequence();
                        return;
                    } else {
                        // Finished map, go to next slide
                        slideIndex++;
                        if(slideIndex >= data[currentLang].length) slideIndex = 0;
                        renderSlide();
                    }
                } else {
                    // Standard Slide
                    slideIndex++;
                    if (slideIndex >= data[currentLang].length) slideIndex = 0;
                    renderSlide();
                }
            }
        }

        function goBack() {
            if (appState === 'hello') return;
            if (appState === 'lang') { appState = 'hello'; switchScreen(screenLang, screenHello); }
            if (appState === 'content') {
                if (slideIndex > 0) {
                    slideIndex--;
                    renderSlide();
                } else {
                    appState = 'lang'; globalNav.style.display = 'none';
                    switchScreen(screenContent, screenLang);
                }
            }
        }

        function switchScreen(from, to) {
            from.classList.remove('active');
            setTimeout(() => { to.classList.add('active'); }, 800);
        }

        function renderSlide() {
            screenContent.classList.remove('active');
            screenMap.classList.remove('active');
            screenContent.style.display = 'none';
            screenMap.style.display = 'none';
            
            setTimeout(() => {
                const slide = data[currentLang][slideIndex];
                
                // IS MAP?
                if (slide.type === 'map-experience') {
                    screenMap.style.display = 'block';
                    screenMap.classList.add('active');
                    resetMap();
                    // Auto Start Zoom
                    setTimeout(() => { advanceMapSequence(); }, 500);
                    return;
                }
                
                // IS STANDARD
                screenContent.style.display = 'flex';
                
                if (slide.bg) {
                    bgDiv.style.backgroundImage = `url('${slide.bg}')`;
                    bgDiv.style.opacity = '0.5';
                }

                let html = '<div class="content-container">';
                if (slide.sideImg) html += `<img src="${slide.sideImg}" alt="Side Image" class="side-image">`;
                html += '<div class="text-content">';
                
                if (slide.type === 'intro') {
                    html += `<img src="${slide.sideImg}" class="profile-photo" alt="Profile"><h1>${slide.title}</h1><h2>${slide.subtitle}</h2><p>${slide.text}</p>`;
                } else if (slide.type === 'title') {
                    html += `<h1>${slide.title}</h1>`;
                } else if (slide.type === 'content') {
                    html += `<h2>${slide.title}</h2><h4>${slide.role}</h4>`;
                    if (slide.isSkills) html += `<div>${slide.skills.map(s => `<span class="skills-tag">${s}</span>`).join('')}</div>`;
                    else html += `<p>${slide.details}</p>`;
                } else if (slide.type === 'end') {
                    html += `<h1>${slide.title}</h1><h2>${slide.subtitle}</h2>`;
                }
                
                html += '</div></div>';
                screenContent.innerHTML = html;
                screenContent.classList.add('active');
            }, 600);
        }

        // --- MAP SEQUENCER ---
        function resetMap() {
            mapSequence = 0;
            // Reset styles
            document.getElementById('geo-map').style.transform = "scale(1)"; // World view
            document.getElementById('road-svg-container').style.opacity = "0";
            document.getElementById('moving-car').style.top = "73%"; 
            document.getElementById('moving-car').style.left = "58%";
            document.getElementById('moving-car').style.opacity = "0";
            
            document.getElementById('marker-neuffen').style.opacity = "0";
            document.getElementById('marker-merc').style.opacity = "0";
            
            document.getElementById('exp-group-neuffen').style.opacity = "0";
            document.getElementById('exp-group-merc').style.opacity = "0";
            
            // Collapse all cards
            document.querySelectorAll('.job-card').forEach(c => c.classList.remove('active'));
        }

        function advanceMapSequence() {
            mapSequence++;
            
            if (mapSequence === 1) {
                // ZOOM IN
                document.getElementById('geo-map').style.transform = "scale(14)"; // Big zoom
                
                setTimeout(() => {
                    document.getElementById('marker-neuffen').style.opacity = "1";
                    document.getElementById('exp-group-neuffen').style.opacity = "1";
                    // Auto open first internship
                    document.querySelector('#exp-group-neuffen .job-card:first-child').classList.add('active');
                }, 2000); // Wait for zoom
            }
            else if (mapSequence === 2) {
                // START DRIVING
                // Close Neuffen cards to clean up view
                document.querySelectorAll('#exp-group-neuffen .job-card').forEach(c => c.classList.remove('active'));
                
                document.getElementById('road-svg-container').style.opacity = "1";
                const car = document.getElementById('moving-car');
                car.style.opacity = "1";
                
                // Move Car (Neuffen -> Merc)
                car.style.top = "35%";
                car.style.left = "50%";
                
                setTimeout(() => {
                    // ARRIVED
                    document.getElementById('marker-merc').style.opacity = "1";
                    document.getElementById('exp-group-merc').style.opacity = "1";
                    // Auto open first Merc job
                    document.querySelector('#exp-group-merc .job-card:first-child').classList.add('active');
                    
                    // Allow Interaction now
                    mapSequence = 4; // Finished animation
                }, 2500);
            }
        }

        // --- ACCORDION LOGIC ---
        function toggleCard(card) {
            // Only allow toggling if we are in map view
            if (!screenMap.classList.contains('active')) return;

            // If card is already active, close it
            if (card.classList.contains('active')) {
                card.classList.remove('active');
            } else {
                // Close all others
                document.querySelectorAll('.job-card').forEach(c => c.classList.remove('active'));
                // Open this one
                card.classList.add('active');
            }
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key === "ArrowRight") goNext();
            if (e.key === "ArrowLeft") goBack();
        });
    </script>
</body>
</html>
